import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as s,e as t}from"./app-8d307529.js";const e={},p=t(`<h2 id="_1-å‰è¨€" tabindex="-1"><a class="header-anchor" href="#_1-å‰è¨€" aria-hidden="true">#</a> 1.å‰è¨€</h2><p>ä¸Šä¸€ç¯‡åšå®¢æˆ‘ä»¬è¯¦ç»†ä»‹ç»äº†ä¸€ä¸‹æœ‰å…³Springçš„åŸºç¡€ç³»åˆ—æ³¨è§£ï¼Œå¹¶é€šè¿‡ä¸€äº›æ¡ˆä¾‹æ¥è®¨è®ºä½¿ç”¨è¿™äº›åŸºç¡€æ³¨è§£æ¥ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°†ç»§ç»­è®¨è®ºSpringé«˜çº§æ³¨è§£å¼€å‘ï¼Œæ›´æ·±å…¥åœ°äº†è§£è¿™äº›å¼ºå¤§çš„å·¥å…·å¦‚ä½•åŠ é€Ÿå¼€å‘è¿‡ç¨‹å¹¶æé«˜ä»£ç è´¨é‡ï¼Œå¥½äº†ï¼Œè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ğŸ˜ğŸ˜ğŸ˜ã€‚</p><h2 id="_2-é…ç½®bean" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®bean" aria-hidden="true">#</a> 2.é…ç½®Bean</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Spring</span>åœ¨<span class="token number">3.</span>xæä¾›çš„æ–°çš„æ³¨è§£ï¼Œç”¨äºæ›¿æ¢<span class="token constant">XML</span>é…ç½®æ–‡ä»¶ã€‚
  
  <span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig</span><span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¼€å‘æ­¥éª¤ï¼š</strong></p><blockquote><ol><li><strong>åˆ›å»ºé…ç½®ç±»</strong>ï¼šé¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªJavaç±»ï¼Œå¹¶åœ¨å…¶ä¸Šæ ‡è®° @Configuration æ³¨è§£ï¼Œå°†å…¶å˜ä¸ºä¸€ä¸ªé…ç½®Beanã€‚</li><li><strong>ç¼–å†™é…ç½®ä»£ç </strong>ï¼šåœ¨é…ç½®ç±»ä¸­ï¼Œç¼–å†™Springé…ç½®ä»£ç ï¼ŒåŒ…æ‹¬Beanå®šä¹‰ã€ä¾èµ–æ³¨å…¥ç­‰ã€‚</li><li><strong>è¿›è¡Œæµ‹è¯•</strong>ï¼šç¼–å†™æµ‹è¯•ä»£ç æ¥éªŒè¯é…ç½®ç±»ä¸­çš„é…ç½®æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚</li></ol></blockquote><h3 id="_1-è®¨è®ºbean" tabindex="-1"><a class="header-anchor" href="#_1-è®¨è®ºbean" aria-hidden="true">#</a> 1.è®¨è®ºBean</h3><p>é…ç½®Beanåœ¨åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢äº†XMLå…·ä½“ä»€ä¹ˆå†…å®¹å‘¢ï¼Ÿ</p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291504739.png" alt="image-20200703100033265" tabindex="0" loading="lazy"><figcaption>image-20200703100033265</figcaption></figure><h3 id="_2-æ³¨è§£å·¥å‚" tabindex="-1"><a class="header-anchor" href="#_2-æ³¨è§£å·¥å‚" aria-hidden="true">#</a> 2.æ³¨è§£å·¥å‚</h3><p><strong>AnnotationConfigApplicationContext</strong></p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>ä½¿ç”¨é…ç½®Beanä¹‹ååˆ›å»ºå·¥å‚çš„ä¸¤ç§æ–¹å¼ï¼š
   <span class="token list punctuation">1.</span> æŒ‡å®šé…ç½®beançš„Class
       ApplicationContext ctx = new AnnotationConfigApplicationContext(AppConfig.class);
   <span class="token list punctuation">2.</span> æŒ‡å®šé…ç½®beanæ‰€åœ¨çš„è·¯å¾„ 
       ApplicationContext ctx = new AnnotationConfigApplicationContext(&quot;org.javatop&quot;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-ä½¿ç”¨é…ç½®beançš„æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#_3-ä½¿ç”¨é…ç½®beançš„æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> 3.ä½¿ç”¨é…ç½®Beançš„æ³¨æ„äº‹é¡¹ï¼š</h3><p>ä½¿ç”¨é…ç½®Beanä¹‹åæ— æ³•å†é›†æˆlog4jæ—¥å¿—æ¡†æ¶ï¼Œè€Œåº”è¯¥é›†æˆæ–°çš„æ—¥å¿—æ¡†æ¶logback</p><p>logbacké›†æˆå¼€å‘æ­¥éª¤ï¼š</p><h4 id="_3-1-å¼•å…¥ç›¸å…³jar" tabindex="-1"><a class="header-anchor" href="#_3-1-å¼•å…¥ç›¸å…³jar" aria-hidden="true">#</a> 3.1 å¼•å…¥ç›¸å…³jar</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jcl-over-slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.logback-extensions<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-ext-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-å¼•å…¥logbacké…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-2-å¼•å…¥logbacké…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 3.2 å¼•å…¥logbacké…ç½®æ–‡ä»¶</h4><p>åœ¨Resourceç›®å½•ä¸‹é¢åˆ›å»ºlogback.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DEBUG<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>@Configurationæ³¨è§£çš„æœ¬è´¨</p><p>åœ¨ä¼ ç»Ÿçš„Springå¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨XMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€ä¾èµ–å…³ç³»å’Œå…¶ä»–é…ç½®ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œéšç€åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§å¢åŠ ï¼ŒXMLé…ç½®æ–‡ä»¶å˜å¾—å†—é•¿ã€ç¹çï¼Œå¹¶ä¸”å®¹æ˜“å‡ºé”™ã€‚ä¸ºäº†ç®€åŒ–é…ç½®ï¼ŒSpringå¼•å…¥äº†åŸºäºJavaçš„é…ç½®æ–¹å¼ï¼Œå³é€šè¿‡ç¼–å†™Javaç±»æ¥æä¾›é…ç½®ä¿¡æ¯ï¼Œè¿™å°±æ˜¯é…ç½®ç±»ã€‚</p><p><code>@Configuration</code>æ³¨è§£æ ‡è®°çš„ç±»è¢«ç§°ä¸ºé…ç½®ç±»ï¼Œå®ƒå……å½“äº†ä¼ ç»ŸXMLé…ç½®æ–‡ä»¶çš„æ›¿ä»£å“ï¼Œæä¾›äº†ä¸€ç§æ›´åŠ ç›´è§‚ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„é…ç½®æ–¹å¼ã€‚é…ç½®ç±»å¯ä»¥åŒ…å«ä¸€äº›ç‰¹æ®Šçš„æ³¨è§£å’Œæ–¹æ³•ï¼Œç”¨äºå£°æ˜å’Œå®šä¹‰Spring Beanä»¥åŠå…¶ä»–é…ç½®å…ƒç´ ã€‚</p><p>é‚£ä¹ˆï¼Œ<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œ<code>@Configuration</code>æ³¨è§£å‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒåŒ…å«äº†ä¸€äº›ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„Beanå®šä¹‰å’Œå…¶ä»–é…ç½®å…ƒç´ ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå½“Springå®¹å™¨æ‰«æåˆ°è¢«<code>@Configuration</code>æ³¨è§£æ ‡è®°çš„ç±»æ—¶ï¼Œå®ƒä¼šè§£æè¯¥ç±»ï¼Œå¹¶æ ¹æ®å…¶ä¸­çš„é…ç½®ä¿¡æ¯åˆ›å»ºç›¸åº”çš„Beanå®šä¹‰ã€‚è¿™äº›é…ç½®ä¿¡æ¯å¯ä»¥åŒ…æ‹¬<code>@Bean</code>æ³¨è§£æ ‡è®°çš„æ–¹æ³•ï¼Œç”¨äºå®šä¹‰Beançš„åˆ›å»ºå’Œåˆå§‹åŒ–é€»è¾‘ã€‚åŒæ—¶ï¼Œé…ç½®ç±»è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ³¨è§£ï¼Œå¦‚<code>@ComponentScan</code>ã€<code>@Import</code>ç­‰ï¼Œæ¥è¿›ä¸€æ­¥å®šä¹‰å’Œå¼•å…¥å…¶ä»–çš„Beanå®šä¹‰å’Œé…ç½®ã€‚</p><p>é…ç½®ç±»çš„ä¼˜åŠ¿åœ¨äºå®ƒæä¾›äº†æ›´åŠ çµæ´»ã€å¯è¯»æ€§é«˜çš„é…ç½®æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨Javaè¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰ï¼Œæ¥åŠ¨æ€åˆ›å»ºå’Œé…ç½®Beanã€‚åŒæ—¶ï¼Œé…ç½®ç±»çš„ç±»å‹å®‰å…¨æ€§æ›´é«˜ï¼Œç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ£€æµ‹é…ç½®é”™è¯¯å’Œç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨æ˜¯å‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒåŒ…å«äº†ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„Beanå®šä¹‰å’Œå…¶ä»–é…ç½®å…ƒç´ ã€‚é€šè¿‡é…ç½®ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥Javaç±»çš„å½¢å¼æ¥å®šä¹‰å’Œç®¡ç†Springåº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼Œæä¾›äº†æ›´åŠ ç›´è§‚ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„é…ç½®æ–¹å¼ã€‚</p><p><strong>ä¹Ÿæ˜¯@Componentæ³¨è§£çš„è¡ç”Ÿæ³¨è§£ï¼Œå¯ä»¥åº”ç”¨&lt;context:component-scanè¿›è¡Œæ‰«æã€‚</strong></p></li></ul><h2 id="_2-beanæ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_2-beanæ³¨è§£" aria-hidden="true">#</a> 2. @Beanæ³¨è§£</h2><p><strong>@Bean</strong>æ³¨è§£åœ¨é…ç½®beanä¸­è¿›è¡Œä½¿ç”¨ï¼Œç­‰åŒäºXMLé…ç½®æ–‡ä»¶ä¸­çš„&lt;beanæ ‡ç­¾</p><h3 id="_2-1-beanæ³¨è§£çš„åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-1-beanæ³¨è§£çš„åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> 2.1 @Beanæ³¨è§£çš„åŸºæœ¬ä½¿ç”¨</h3><h4 id="_1-ä»€ä¹ˆæ˜¯ç®€å•å¯¹è±¡ä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡å‘¢" tabindex="-1"><a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯ç®€å•å¯¹è±¡ä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡å‘¢" aria-hidden="true">#</a> 1.ä»€ä¹ˆæ˜¯ç®€å•å¯¹è±¡ä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡å‘¢</h4><p>åœ¨Springä¸­ï¼Œç®€å•å¯¹è±¡å’Œå¤æ‚å¯¹è±¡æ˜¯ç›¸å¯¹çš„æ¦‚å¿µï¼Œç”¨äºæè¿°å¯¹è±¡çš„ç»“æ„å’Œå¤æ‚ç¨‹åº¦ã€‚</p><p><strong>ç®€å•å¯¹è±¡(Simple Object)</strong> é€šå¸¸æŒ‡çš„æ˜¯ç®€å•çš„æ•°æ®ç±»å‹æˆ–ç®€å•çš„<strong>POJO(Plain Old Java Object)</strong>ã€‚ç®€å•æ•°æ®ç±»å‹åŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹**(å¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ç­‰)<strong>ä»¥åŠå®ƒä»¬çš„åŒ…è£…ç±»å‹(<strong>å¦‚Integerã€Floatã€Booleanç­‰)</strong>ã€‚ç®€å•POJOæ˜¯æŒ‡æ²¡æœ‰å¤æ‚ä¸šåŠ¡é€»è¾‘å’Œä¾èµ–å…³ç³»çš„æ™®é€šJavaå¯¹è±¡ï¼Œé€šå¸¸åªåŒ…å«ä¸€äº›ç®€å•çš„å±æ€§å’Œå¯¹åº”çš„</strong>getter<strong>å’Œ</strong>setter**æ–¹æ³•ã€‚</p><p>å¤æ‚å¯¹è±¡ï¼ˆComplex Objectï¼‰é€šå¸¸æŒ‡çš„æ˜¯å…·æœ‰å¤æ‚ç»“æ„å’Œå…³è”å…³ç³»çš„å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡å¯èƒ½åŒ…å«åµŒå¥—çš„å¯¹è±¡ã€é›†åˆæˆ–å…¶ä»–å¤æ‚ç±»å‹çš„å±æ€§ã€‚å¤æ‚å¯¹è±¡å¯èƒ½æ¶‰åŠåˆ°å¤šå±‚çº§çš„å…³ç³»ï¼Œéœ€è¦è¿›è¡Œä¾èµ–æ³¨å…¥ã€å…³è”å…³ç³»çš„ç®¡ç†å’Œä¸šåŠ¡é€»è¾‘çš„å¤„ç†ã€‚</p><p>åœ¨Springä¸­ï¼Œå¯¹äºç®€å•å¯¹è±¡ï¼Œé€šå¸¸å¯ä»¥ç›´æ¥ä½¿ç”¨åŸºæœ¬çš„ä¾èµ–æ³¨å…¥æ–¹å¼ï¼Œå¦‚é€šè¿‡<code>@Autowired</code>æ³¨è§£æ³¨å…¥ç®€å•çš„ä¾èµ–å¯¹è±¡ã€‚è€Œå¯¹äºå¤æ‚å¯¹è±¡ï¼Œé€šå¸¸éœ€è¦è¿›è¡Œæ›´å¤æ‚çš„é…ç½®å’Œç®¡ç†ï¼Œå¦‚é€šè¿‡XMLé…ç½®æ–‡ä»¶æˆ–æ³¨è§£é…ç½®ç›¸å…³çš„ä¾èµ–å…³ç³»ã€ä½¿ç”¨<code>@Qualifier</code>æ³¨è§£è§£å†³ä¾èµ–å¯¹è±¡çš„æ­§ä¹‰æ€§ã€ä½¿ç”¨<code>@Autowired</code>æ³¨è§£æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§ç­‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç®€å•å¯¹è±¡å’Œå¤æ‚å¯¹è±¡å¹¶æ²¡æœ‰ä¸¥æ ¼çš„å®šä¹‰å’Œç•Œé™ï¼Œå®ƒä»¬çš„åˆ’åˆ†ä¸»è¦æ˜¯ä¸ºäº†æè¿°å¯¹è±¡çš„å¤æ‚ç¨‹åº¦å’Œå¤„ç†æ–¹å¼ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’Œå¯¹è±¡çš„ç»“æ„ï¼Œå¯ä»¥çµæ´»åœ°é€‰æ‹©é€‚åˆçš„ä¾èµ–æ³¨å…¥æ–¹å¼å’Œé…ç½®æ–¹å¼ã€‚</p><p>ç®€å•æ¥è¯´ï¼š<strong>ç®€å•å¯¹è±¡å°±æ˜¯ç›´æ¥èƒ½å¤Ÿé€šè¿‡newæ–¹å¼åˆ›å»ºçš„å¯¹è±¡ï¼Œæ¯”å¦‚new User()ã€‚å¤æ‚å¯¹è±¡å°±æ˜¯ä¸èƒ½é€šè¿‡newçš„æ–¹å¼ç›´æ¥åˆ›å»ºçš„å¯¹è±¡ã€‚æ¯”å¦‚ Connection SqlSessionFactoryç­‰ç­‰</strong></p><h4 id="_2-ç®€å•å¯¹è±¡çš„åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_2-ç®€å•å¯¹è±¡çš„åˆ›å»º" aria-hidden="true">#</a> 2.ç®€å•å¯¹è±¡çš„åˆ›å»º</h4><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/Leo100/202310221442630.png" alt="image-20231022144250397" tabindex="0" loading="lazy"><figcaption>image-20231022144250397</figcaption></figure><h4 id="_3-å¤æ‚å¯¹è±¡çš„åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_3-å¤æ‚å¯¹è±¡çš„åˆ›å»º" aria-hidden="true">#</a> 3.å¤æ‚å¯¹è±¡çš„åˆ›å»º</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token comment">//@Bean åˆ›å»ºå¤æ‚å¯¹è±¡</span>
  <span class="token comment">//ä¸€èˆ¬ç”¨äºé—ç•™ç³»ç»Ÿæ•´åˆ </span>
  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">Connection</span> <span class="token function">conn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">ConnectionFactoryBean</span> factoryBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      conn <span class="token operator">=</span> factoryBean<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> conn<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-è‡ªå®šä¹‰idå€¼" tabindex="-1"><a class="header-anchor" href="#_4-è‡ªå®šä¹‰idå€¼" aria-hidden="true">#</a> 4.è‡ªå®šä¹‰idå€¼</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_5-æ§åˆ¶å¯¹è±¡åˆ›å»ºæ¬¡æ•°" tabindex="-1"><a class="header-anchor" href="#_5-æ§åˆ¶å¯¹è±¡åˆ›å»ºæ¬¡æ•°" aria-hidden="true">#</a> 5.æ§åˆ¶å¯¹è±¡åˆ›å»ºæ¬¡æ•°</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">&quot;singleton|prototype&quot;</span><span class="token punctuation">)</span> é»˜è®¤å€¼ singleton
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æˆ‘ä»¬ä½¿ç”¨@Scopeæ³¨è§£çš„æ—¶å€™ï¼Œvalueå€¼ä¸ºsinletonæ—¶æˆ–è€…ä¸å¡«å†™@Socopeæ³¨è§£æ—¶ï¼ŒSpringåªä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚å½“æˆ‘ä»¬valueå€¼ä¸ºprototypeï¼Œæ­¤æ—¶Springä¼šä¸ºæˆ‘ä»¬åˆ›å»ºå¤šä¸ªå¯¹è±¡ã€‚</p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/Leo100/202310221455574.png" alt="image-20231022145500394" tabindex="0" loading="lazy"><figcaption>image-20231022145500394</figcaption></figure><h3 id="_2-2-beanæ³¨è§£çš„æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#_2-2-beanæ³¨è§£çš„æ³¨å…¥" aria-hidden="true">#</a> 2.2 @Beanæ³¨è§£çš„æ³¨å…¥</h3><h4 id="_1-ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_1-ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹" aria-hidden="true">#</a> 1. ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//å¾…æ³¨å…¥å¯¹è±¡</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">UserDAO</span> <span class="token function">userDAO</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token comment">//æ–¹å¼ä¸€ï¼šå¾…æ³¨å…¥å¯¹è±¡ä½œä¸ºå‚æ•°ï¼š</span>
  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token class-name">UserDAO</span> userDAO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">UserServiceImpl</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userService<span class="token punctuation">.</span><span class="token function">setUserDAO</span><span class="token punctuation">(</span>userDAO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> userService<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//æ–¹å¼äºŒï¼ˆç®€åŒ–ï¼‰ï¼šç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼š</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">UserServiceImpl</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  userService<span class="token punctuation">.</span><span class="token function">setUserDAO</span><span class="token punctuation">(</span><span class="token function">userDAO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> userService<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-jdkç±»å‹çš„æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#_2-jdkç±»å‹çš„æ³¨å…¥" aria-hidden="true">#</a> 2. JDKç±»å‹çš„æ³¨å…¥</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Customer</span> <span class="token function">customer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Customer</span> customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  customer<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  customer<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;xiaohei&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> customer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JDKç±»å‹æ³¨å…¥ç»†èŠ‚åˆ†æï¼šå¦‚æœç›´æ¥åœ¨ä»£ç ä¸­è¿›è¡Œsetæ–¹æ³•çš„è°ƒç”¨ï¼Œä¼šå­˜åœ¨è€¦åˆçš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token annotation punctuation">@Configuration</span>
  <span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/init.properties&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig1</span> <span class="token punctuation">{</span>
  
      <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${id}&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${name}&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
   
      <span class="token annotation punctuation">@Bean</span>
      <span class="token keyword">public</span> <span class="token class-name">Customer</span> <span class="token function">customer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">Customer</span> customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          customer<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
          customer<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
          <span class="token keyword">return</span> customer<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-componentscanæ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_3-componentscanæ³¨è§£" aria-hidden="true">#</a> 3. @ComponentScanæ³¨è§£</h2><p><code>@Configuration</code>æ³¨è§£æ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦æ³¨è§£ï¼Œç”¨äºæ ‡è®°ä¸€ä¸ªç±»ä¸ºé…ç½®ç±»ã€‚é…ç½®ç±»æä¾›äº†Springåº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼Œæ›¿ä»£äº†ä¼ ç»Ÿçš„XMLé…ç½®æ–‡ä»¶ã€‚åœ¨è¯¦ç»†è§£é‡Š<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹å®ƒçš„èƒŒæ™¯å’Œä½œç”¨ã€‚</p><p>åœ¨ä¼ ç»Ÿçš„Springå¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨XMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€ä¾èµ–å…³ç³»å’Œå…¶ä»–é…ç½®ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œéšç€åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§å¢åŠ ï¼ŒXMLé…ç½®æ–‡ä»¶å˜å¾—å†—é•¿ã€ç¹çï¼Œå¹¶ä¸”å®¹æ˜“å‡ºé”™ã€‚ä¸ºäº†ç®€åŒ–é…ç½®ï¼ŒSpringå¼•å…¥äº†åŸºäºJavaçš„é…ç½®æ–¹å¼ï¼Œå³é€šè¿‡ç¼–å†™Javaç±»æ¥æä¾›é…ç½®ä¿¡æ¯ï¼Œè¿™å°±æ˜¯é…ç½®ç±»ã€‚</p><p><code>@Configuration</code>æ³¨è§£æ ‡è®°çš„ç±»è¢«ç§°ä¸ºé…ç½®ç±»ï¼Œå®ƒå……å½“äº†ä¼ ç»ŸXMLé…ç½®æ–‡ä»¶çš„æ›¿ä»£å“ï¼Œæä¾›äº†ä¸€ç§æ›´åŠ ç›´è§‚ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„é…ç½®æ–¹å¼ã€‚é…ç½®ç±»å¯ä»¥åŒ…å«ä¸€äº›ç‰¹æ®Šçš„æ³¨è§£å’Œæ–¹æ³•ï¼Œç”¨äºå£°æ˜å’Œå®šä¹‰Spring Beanä»¥åŠå…¶ä»–é…ç½®å…ƒç´ ã€‚</p><p>é‚£ä¹ˆï¼Œ<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œ<code>@Configuration</code>æ³¨è§£å‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒåŒ…å«äº†ä¸€äº›ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„Beanå®šä¹‰å’Œå…¶ä»–é…ç½®å…ƒç´ ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå½“Springå®¹å™¨æ‰«æåˆ°è¢«<code>@Configuration</code>æ³¨è§£æ ‡è®°çš„ç±»æ—¶ï¼Œå®ƒä¼šè§£æè¯¥ç±»ï¼Œå¹¶æ ¹æ®å…¶ä¸­çš„é…ç½®ä¿¡æ¯åˆ›å»ºç›¸åº”çš„Beanå®šä¹‰ã€‚è¿™äº›é…ç½®ä¿¡æ¯å¯ä»¥åŒ…æ‹¬<code>@Bean</code>æ³¨è§£æ ‡è®°çš„æ–¹æ³•ï¼Œç”¨äºå®šä¹‰Beançš„åˆ›å»ºå’Œåˆå§‹åŒ–é€»è¾‘ã€‚åŒæ—¶ï¼Œé…ç½®ç±»è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ³¨è§£ï¼Œå¦‚<code>@ComponentScan</code>ã€<code>@Import</code>ç­‰ï¼Œæ¥è¿›ä¸€æ­¥å®šä¹‰å’Œå¼•å…¥å…¶ä»–çš„Beanå®šä¹‰å’Œé…ç½®ã€‚</p><p>é…ç½®ç±»çš„ä¼˜åŠ¿åœ¨äºå®ƒæä¾›äº†æ›´åŠ çµæ´»ã€å¯è¯»æ€§é«˜çš„é…ç½®æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨Javaè¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰ï¼Œæ¥åŠ¨æ€åˆ›å»ºå’Œé…ç½®Beanã€‚åŒæ—¶ï¼Œé…ç½®ç±»çš„ç±»å‹å®‰å…¨æ€§æ›´é«˜ï¼Œç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ£€æµ‹é…ç½®é”™è¯¯å’Œç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨æ˜¯å‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒåŒ…å«äº†ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„Beanå®šä¹‰å’Œå…¶ä»–é…ç½®å…ƒç´ ã€‚é€šè¿‡é…ç½®ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥Javaç±»çš„å½¢å¼æ¥å®šä¹‰å’Œç®¡ç†Springåº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼Œæä¾›äº†æ›´åŠ ç›´è§‚ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„é…ç½®æ–¹å¼ã€‚ç­‰åŒäºXMLé…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;context:component-scan</code>æ ‡ç­¾</p><h3 id="_3-1-åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_3-1-åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> 3.1 åŸºæœ¬ä½¿ç”¨ï¼š</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//åŠ è½½é…ç½®Beanä¸Šï¼š</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;org.javatop.scan&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig2</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-æ’é™¤ã€åŒ…å«çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_3-2-æ’é™¤ã€åŒ…å«çš„ä½¿ç”¨" aria-hidden="true">#</a> 3.2 æ’é™¤ã€åŒ…å«çš„ä½¿ç”¨ï¼š</h3><h4 id="_1-æ’é™¤è¿‡æ»¤" tabindex="-1"><a class="header-anchor" href="#_1-æ’é™¤è¿‡æ»¤" aria-hidden="true">#</a> 1.æ’é™¤è¿‡æ»¤ï¼š</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.javatop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>exclude-filter</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>assignable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.javatop.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›¿æ¢ä¸ºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;org.javatop.scan&quot;</span><span class="token punctuation">,</span>
                 excludeFilters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@ComponentScan.Filter</span><span class="token punctuation">(</span>type<span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">ANNOTATION</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                   <span class="token annotation punctuation">@ComponentScan.Filter</span><span class="token punctuation">(</span>type<span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">ASPECTJ</span><span class="token punctuation">,</span>pattern <span class="token operator">=</span> <span class="token string">&quot;*..User1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">/*
  type = FilterType.ANNOTATION          value
                   .ASSIGNABLE_TYPE     value
                   .ASPECTJ             pattern   
                   .REGEX               pattern
                   .CUSTOM              value        */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-åŒ…å«è¿‡æ»¤" tabindex="-1"><a class="header-anchor" href="#_2-åŒ…å«è¿‡æ»¤" aria-hidden="true">#</a> 2.åŒ…å«è¿‡æ»¤ï¼š</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.javatop<span class="token punctuation">&quot;</span></span> <span class="token attr-name">use-default-filters</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>include-filter</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›¿æ¢ä¸ºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;org.javatop.scan&quot;</span><span class="token punctuation">,</span>
                 useDefaultFilters <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                 includeFilters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@ComponentScan.Filter</span><span class="token punctuation">(</span>type<span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">ANNOTATION</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">Service</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">/*
  type = FilterType.ANNOTATION          value
                   .ASSIGNABLE_TYPE     value
                   .ASPECTJ             pattern   
                   .REGEX               pattern
                   .CUSTOM              value               */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-springå·¥å‚åˆ›å»ºå¯¹è±¡çš„æ–¹å¼åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_4-springå·¥å‚åˆ›å»ºå¯¹è±¡çš„æ–¹å¼åˆ†æ" aria-hidden="true">#</a> 4. Springå·¥å‚åˆ›å»ºå¯¹è±¡çš„æ–¹å¼åˆ†æ</h2><h3 id="_1-å¤šç§é…ç½®æ–¹å¼çš„åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_1-å¤šç§é…ç½®æ–¹å¼çš„åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> 1. å¤šç§é…ç½®æ–¹å¼çš„åº”ç”¨åœºæ™¯</h3><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291505590.png" alt="image-20200706174301418" tabindex="0" loading="lazy"><figcaption>image-20200706174301418</figcaption></figure><h3 id="_2-é…ç½®ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®ä¼˜å…ˆçº§" aria-hidden="true">#</a> 2. é…ç½®ä¼˜å…ˆçº§</h3><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>@ComponentåŠå…¶è¡ç”Ÿæ³¨è§£ &lt; @Bean &lt; é…ç½®æ–‡ä»¶beanæ ‡ç­¾
ä¼˜å…ˆçº§é«˜çš„é…ç½®ä¼šè¦†ç›–ä¼˜å…ˆçº§ä½é…ç½® 

@Component
public class User{

}

@Bean
public User user(){
  return new User();
}

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

é…ç½®è¦†ç›–æ¡ä»¶ï¼šidå€¼ ä¿æŒä¸€è‡´
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-è§£å†³åŸºäºæ³¨è§£è¿›è¡Œé…ç½®çš„è€¦åˆé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-è§£å†³åŸºäºæ³¨è§£è¿›è¡Œé…ç½®çš„è€¦åˆé—®é¢˜" aria-hidden="true">#</a> 3. è§£å†³åŸºäºæ³¨è§£è¿›è¡Œé…ç½®çš„è€¦åˆé—®é¢˜</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- applicationContext.xml é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè¦†ç›– --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDAO<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.javatop.injection.UserDAOImplNew<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
12
@Configuration
//@ImportResource(&quot;applicationContext.xml&quot;)
public class AppConfig4 {

    @Bean
    public UserDAO userDAO() {
        return new UserDAOImpl();
    }
}

@Configuration
@ImportResource(&quot;applicationContext.xml&quot;)
public class AppConfig5{
  
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-æ•´åˆå¤šä¸ªé…ç½®ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_5-æ•´åˆå¤šä¸ªé…ç½®ä¿¡æ¯" aria-hidden="true">#</a> 5. æ•´åˆå¤šä¸ªé…ç½®ä¿¡æ¯</h2><p>ä¸ºä»€ä¹ˆä¼šæœ‰å¤šä¸ªé…ç½®ä¿¡æ¯</p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>æ‹†åˆ†å¤šä¸ªé…ç½®beançš„å¼€å‘ï¼Œæ˜¯ä¸€ç§æ¨¡å—åŒ–å¼€å‘çš„å½¢å¼ï¼Œä¹Ÿä½“ç°äº†é¢å‘å¯¹è±¡å„å¸å…¶èŒçš„è®¾è®¡æ€æƒ³
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¤šé…ç½®ä¿¡æ¯æ•´åˆçš„æ–¹å¼</p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code><span class="token list punctuation">-</span> å¤šä¸ªé…ç½®Beançš„æ•´åˆ
<span class="token list punctuation">-</span> é…ç½®Beanä¸@Componentç›¸å…³æ³¨è§£çš„æ•´åˆ
<span class="token list punctuation">-</span> é…ç½®Beanä¸SpringXMLé…ç½®æ–‡ä»¶çš„æ•´åˆ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•´åˆå¤šç§é…ç½®éœ€è¦å…³æ³¨é‚£äº›è¦ç‚¹</p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code><span class="token list punctuation">-</span> å¦‚ä½•ä½¿å¤šé…ç½®çš„ä¿¡æ¯ æ±‡æ€»æˆä¸€ä¸ªæ•´ä½“
<span class="token list punctuation">-</span> å¦‚ä½•å®ç°è·¨é…ç½®çš„æ³¨å…¥
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-å¤šä¸ªé…ç½®beançš„æ•´åˆ" tabindex="-1"><a class="header-anchor" href="#_5-1-å¤šä¸ªé…ç½®beançš„æ•´åˆ" aria-hidden="true">#</a> 5.1 å¤šä¸ªé…ç½®Beançš„æ•´åˆ</h3><h4 id="_1-base-packageè¿›è¡Œå¤šä¸ªé…ç½®beançš„æ•´åˆ" tabindex="-1"><a class="header-anchor" href="#_1-base-packageè¿›è¡Œå¤šä¸ªé…ç½®beançš„æ•´åˆ" aria-hidden="true">#</a> 1.base-packageè¿›è¡Œå¤šä¸ªé…ç½®Beançš„æ•´åˆ</h4><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291505554.png" alt="image-20200707170421669" tabindex="0" loading="lazy"><figcaption>image-20200707170421669</figcaption></figure><p>é€šè¿‡ @Import(xxx.class)</p><p>æŠŠAppConfig1å½“ä½œä¸»é…ç½®Beanï¼Œåœ¨AppConfig1ä¸Šæ·»åŠ @Import(Appconfig2.class)ï¼Œå®Œæˆæ•´åˆ</p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291505739.png" alt="image-20200707170745814" tabindex="0" loading="lazy"><figcaption>image-20200707170745814</figcaption></figure><p>åœ¨å·¥å‚åˆ›å»ºæ—¶ï¼ŒæŒ‡å®šå¤šä¸ªé…ç½®Beançš„Classå¯¹è±¡ ã€äº†è§£ã€‘</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">AppConfig1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">AppConfig2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•è·¨é…ç½®è¿›è¡Œæ³¨å…¥ï¼Ÿ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AppConfig2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig1</span> <span class="token punctuation">{</span>

    <span class="token comment">//æŠŠè¦è·¨é…ç½®æ³¨å…¥çš„å¯¹è±¡ä½œä¸ºæœ¬é…ç½®Beançš„å±æ€§</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDAO</span> userDAO<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserServiceImpl</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">setUserDAO</span><span class="token punctuation">(</span>userDAO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig2</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDAO</span> <span class="token function">userDAO</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-é…ç½®beanä¸-componentç›¸å…³æ³¨è§£çš„æ•´åˆ" tabindex="-1"><a class="header-anchor" href="#_5-2-é…ç½®beanä¸-componentç›¸å…³æ³¨è§£çš„æ•´åˆ" aria-hidden="true">#</a> 5.2 é…ç½®Beanä¸@Componentç›¸å…³æ³¨è§£çš„æ•´åˆ</h3><p>é€šè¿‡ @ComponentScan(basePackages = &quot; &quot;) æ³¨è§£æ•´åˆï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Repository</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDAOImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDAO</span><span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig3</span> <span class="token punctuation">{</span>
   
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDAO</span> userDAO<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserServiceImpl</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">setUserDAO</span><span class="token punctuation">(</span>userDAO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">AppConfig3</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-é…ç½®beanä¸é…ç½®æ–‡ä»¶æ•´åˆ" tabindex="-1"><a class="header-anchor" href="#_5-3-é…ç½®beanä¸é…ç½®æ–‡ä»¶æ•´åˆ" aria-hidden="true">#</a> 5.3 é…ç½®Beanä¸é…ç½®æ–‡ä»¶æ•´åˆ</h3><p>ä½¿ç”¨ @ImportResource(â€œapplicationContext.xmlâ€) æ³¨è§£æ•´åˆï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//1. é—ç•™ç³»ç»Ÿçš„æ•´åˆ 2. é…ç½®è¦†ç›–</span>
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDAOImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDAO</span><span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;userDAO&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;org.javatop.injection.UserDAOImpl&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig4</span> <span class="token punctuation">{</span>
  
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDAO</span> userDAO<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserServiceImpl</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">setUserDAO</span><span class="token punctuation">(</span>userDAO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">AppConfig4</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-é…ç½®beanåº•å±‚å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#_6-é…ç½®beanåº•å±‚å®ç°åŸç†" aria-hidden="true">#</a> 6. é…ç½®Beanåº•å±‚å®ç°åŸç†</h2><p>Springåœ¨é…ç½®Beanä¸­åŠ å…¥äº†@Configurationæ³¨è§£åï¼Œåº•å±‚å°±ä¼šé€šè¿‡Cglibçš„ä»£ç†æ–¹å¼ï¼Œæ¥è¿›è¡Œå¯¹è±¡ç›¸å…³çš„é…ç½®ã€å¤„ç†</p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291505319.png" alt="image-20200709114200371" tabindex="0" loading="lazy"><figcaption>image-20200709114200371</figcaption></figure><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œé…ç½®Beançš„åº•å±‚å®ç°åŸç†ä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šBeanå®šä¹‰å’ŒBeanå·¥å‚ã€‚</p><ol><li><p><strong>Beanå®šä¹‰(Bean Definition)ï¼š</strong> Beanå®šä¹‰æ˜¯æè¿°Beançš„å…ƒæ•°æ®ï¼Œå®ƒåŒ…å«äº†Beançš„ç±»åã€å±æ€§å€¼ã€æ„é€ å‡½æ•°å‚æ•°ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰ä¿¡æ¯ã€‚åœ¨Springä¸­ï¼Œæ¯ä¸€ä¸ªè¢«ç®¡ç†çš„Beanéƒ½éœ€è¦æœ‰ä¸€ä¸ªå¯¹åº”çš„Beanå®šä¹‰ã€‚</p><p>åœ¨é…ç½®Beanæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ¥å®šä¹‰Beanã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„é…ç½®æ–¹å¼ï¼š</p><ul><li>XMLé…ç½®æ–‡ä»¶ï¼šä½¿ç”¨<code>&lt;bean&gt;</code>æ ‡ç­¾æ¥å®šä¹‰Beanï¼Œå¯ä»¥æŒ‡å®šBeançš„ç±»åã€å±æ€§å€¼ã€æ„é€ å‡½æ•°å‚æ•°ç­‰ã€‚</li><li>Javaæ³¨è§£ï¼šä½¿ç”¨æ³¨è§£å¦‚<code>@Component</code>ã€<code>@Service</code>ã€<code>@Repository</code>ã€<code>@Controller</code>ç­‰æ¥æ ‡è®°Beanç±»ï¼ŒSpringä¼šè‡ªåŠ¨æ‰«æå¹¶è§£æè¿™äº›æ³¨è§£ï¼Œå°†å…¶è½¬åŒ–ä¸ºBeanå®šä¹‰ã€‚</li><li>Javaé…ç½®ç±»ï¼šä½¿ç”¨<code>@Configuration</code>æ³¨è§£çš„ç±»æ¥å®šä¹‰Beanï¼Œä½¿ç”¨<code>@Bean</code>æ³¨è§£æ¥æ ‡è®°æ–¹æ³•ï¼Œæ–¹æ³•çš„è¿”å›å€¼å°†ä½œä¸ºBeançš„å®ä¾‹ã€‚</li></ul><p>æ— è®ºæ˜¯ä½¿ç”¨XMLé…ç½®æ–‡ä»¶ã€æ³¨è§£è¿˜æ˜¯Javaé…ç½®ç±»ï¼Œæœ€ç»ˆéƒ½ä¼šå°†é…ç½®ä¿¡æ¯è§£ææˆBeanå®šä¹‰å¯¹è±¡ã€‚</p></li><li><p><strong>Beanå·¥å‚(Bean Factory)ï¼š</strong> Beanå·¥å‚æ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒå®¹å™¨ï¼Œè´Ÿè´£ç®¡ç†å’Œåˆ›å»ºBeançš„å®ä¾‹ã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥å‚æ¨¡å¼çš„å®ç°ï¼Œåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œæ ¹æ®Beanå®šä¹‰åˆ›å»ºå’Œç®¡ç†Beanå®ä¾‹ã€‚</p><p>åœ¨Springä¸­ï¼Œä½¿ç”¨<code>ApplicationContext</code>æ¥å£æ¥è¡¨ç¤ºBeanå·¥å‚ã€‚<code>ApplicationContext</code>æ¥å£æ˜¯Beanå·¥å‚çš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„æ–¹æ³•æ¥è·å–å’Œç®¡ç†Beanã€‚</p><p>å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒSpringå®¹å™¨ä¼šè¯»å–é…ç½®æ–‡ä»¶æˆ–æ‰«ææ³¨è§£ï¼Œè§£æBeanå®šä¹‰å¹¶åˆ›å»ºå¯¹åº”çš„Beanå®ä¾‹ã€‚åœ¨åˆ›å»ºBeanå®ä¾‹æ—¶ï¼ŒBeanå·¥å‚ä¼šæ ¹æ®Beanå®šä¹‰ä¸­çš„ä¿¡æ¯è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>å®ä¾‹åŒ–Beanï¼šæ ¹æ®Beanå®šä¹‰ä¸­æŒ‡å®šçš„ç±»åï¼Œä½¿ç”¨Javaåå°„æœºåˆ¶åˆ›å»ºBeançš„å®ä¾‹ã€‚</li><li>å±æ€§æ³¨å…¥ï¼šæ ¹æ®Beanå®šä¹‰ä¸­æŒ‡å®šçš„å±æ€§å€¼ï¼Œå°†å¯¹åº”çš„å€¼æ³¨å…¥åˆ°Beanå®ä¾‹ä¸­ã€‚</li><li>ä¾èµ–æ³¨å…¥ï¼šæ ¹æ®Beanå®šä¹‰ä¸­æŒ‡å®šçš„ä¾èµ–å…³ç³»ï¼Œå°†ä¾èµ–çš„Beanæ³¨å…¥åˆ°å½“å‰Beanå®ä¾‹ä¸­ã€‚</li><li>ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šæ ¹æ®Beanå®šä¹‰ä¸­æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ï¼Œè°ƒç”¨ç›¸åº”çš„æ–¹æ³•æ¥åˆå§‹åŒ–å’Œé”€æ¯Beanå®ä¾‹ã€‚</li></ul><p><strong>Beanå·¥å‚é€šè¿‡ä½¿ç”¨Beanå®šä¹‰å’Œåå°„æœºåˆ¶ï¼Œå®ç°äº†Beançš„åŠ¨æ€åˆ›å»ºå’Œç®¡ç†ã€‚</strong></p></li></ol><p>é…ç½®Beançš„åº•å±‚å®ç°åŸç†ä¸»è¦æ¶‰åŠBeanå®šä¹‰å’ŒBeanå·¥å‚ã€‚Beanå®šä¹‰æè¿°äº†Beançš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬ç±»åã€å±æ€§å€¼ç­‰ä¿¡æ¯ã€‚Beanå·¥å‚è´Ÿè´£ç®¡ç†å’Œåˆ›å»ºBeançš„å®ä¾‹ï¼Œæ ¹æ®Beanå®šä¹‰åŠ¨æ€åˆ›å»ºBeanï¼Œå¹¶è¿›è¡Œå±æ€§æ³¨å…¥ã€ä¾èµ–æ³¨å…¥å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚è¿™ç§åŸºäºBeanå®šä¹‰å’Œå·¥å‚æ¨¡å¼çš„å®ç°æ–¹å¼ï¼Œä½¿å¾—Springæ¡†æ¶å…·æœ‰äº†çµæ´»æ€§ã€å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h2 id="_7-å››ç»´ä¸€ä½“çš„å¼€å‘æ€æƒ³" tabindex="-1"><a class="header-anchor" href="#_7-å››ç»´ä¸€ä½“çš„å¼€å‘æ€æƒ³" aria-hidden="true">#</a> 7. å››ç»´ä¸€ä½“çš„å¼€å‘æ€æƒ³</h2><h3 id="_7-1-ä»€ä¹ˆæ˜¯å››ç»´ä¸€ä½“" tabindex="-1"><a class="header-anchor" href="#_7-1-ä»€ä¹ˆæ˜¯å››ç»´ä¸€ä½“" aria-hidden="true">#</a> 7.1 ä»€ä¹ˆæ˜¯å››ç»´ä¸€ä½“</h3><p>å››ç»´ä¸€ä½“&quot;æ˜¯æŒ‡Springæ¡†æ¶çš„å››ä¸ªæ ¸å¿ƒç»´åº¦ï¼Œå®ƒä»¬æ˜¯ï¼šä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect-Oriented Programmingï¼‰ã€æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰ã€å’Œè‡ªåŠ¨åŒ–æ¨¡å—åŒ–ï¼ˆComponent-Based Developmentï¼‰ã€‚</p><ol><li>ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ï¼šä¾èµ–æ³¨å…¥æ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚å®ƒé€šè¿‡å°†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»çš„åˆ›å»ºå’Œç®¡ç†äº¤ç»™æ¡†æ¶æ¥å®ç°è§£è€¦å’Œçµæ´»æ€§ã€‚åœ¨Springä¸­ï¼Œæˆ‘ä»¬å°†ä¾èµ–å…³ç³»å£°æ˜åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ–è€…ä½¿ç”¨æ³¨è§£æ¥è‡ªåŠ¨æ³¨å…¥ä¾èµ–å¯¹è±¡ã€‚</li><li>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect-Oriented Programmingï¼‰ï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹æ˜¯ä¸€ç§é€šè¿‡å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆä¾‹å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€å®‰å…¨æ€§ç­‰ï¼‰ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åˆ†ç¦»çš„ç¼–ç¨‹æ–¹å¼ã€‚Springæ¡†æ¶é€šè¿‡AOPæ¨¡å—æä¾›äº†å¯¹é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ”¯æŒï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å®¹æ˜“åœ°å®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹çš„åŠŸèƒ½ã€‚</li><li>æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰ï¼šæ§åˆ¶åè½¬æ˜¯æŒ‡å°†å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†äº¤ç»™æ¡†æ¶æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ç”±å¼€å‘äººå‘˜æ‰‹åŠ¨å®ä¾‹åŒ–å¯¹è±¡ã€‚åœ¨Springä¸­ï¼Œæ§åˆ¶åè½¬é€šè¿‡IoCå®¹å™¨æ¥å®ç°ï¼Œå®ƒè´Ÿè´£ç®¡ç†å’Œåˆ›å»ºåº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡ï¼Œå¹¶åœ¨éœ€è¦æ—¶å°†è¿™äº›å¯¹è±¡æ³¨å…¥åˆ°å…¶ä»–å¯¹è±¡ä¸­ã€‚</li><li>è‡ªåŠ¨åŒ–æ¨¡å—åŒ–ï¼ˆComponent-Based Developmentï¼‰ï¼šè‡ªåŠ¨åŒ–æ¨¡å—åŒ–æ˜¯æŒ‡å°†åº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºç‹¬ç«‹çš„ã€å¯é‡ç”¨çš„ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰æ˜ç¡®å®šä¹‰çš„èŒè´£å’Œæ¥å£ã€‚Springæ¡†æ¶é¼“åŠ±ä½¿ç”¨ç»„ä»¶åŒ–çš„æ–¹å¼è¿›è¡Œå¼€å‘ï¼Œé€šè¿‡æ³¨è§£ã€é…ç½®æ–‡ä»¶ç­‰æ–¹å¼å°†è¿™äº›ç»„ä»¶è¿›è¡Œç®¡ç†å’Œç»„è£…ã€‚</li></ol><p>è¿™å››ä¸ªç»´åº¦ç›¸äº’å…³è”ï¼Œå…±åŒæ„æˆäº†Springæ¡†æ¶çš„æ ¸å¿ƒç†å¿µå’ŒåŠŸèƒ½ã€‚å®ƒä»¬å¸®åŠ©å¼€å‘äººå‘˜å®ç°ä»£ç çš„æ¾è€¦åˆã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>Springå¼€å‘ä¸€ä¸ªåŠŸèƒ½çš„4ç§å½¢å¼ï¼Œè™½ç„¶å¼€å‘æ–¹å¼ä¸åŒï¼Œä½†æ˜¯æœ€ç»ˆæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚
<span class="token list punctuation">1.</span> åŸºäºschema
<span class="token list punctuation">2.</span> åŸºäºç‰¹å®šåŠŸèƒ½æ³¨è§£
<span class="token list punctuation">3.</span> åŸºäºåŸå§‹&lt;bean
<span class="token list punctuation">4.</span> åŸºäº@Beanæ³¨è§£
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-å››ç»´ä¸€ä½“çš„å¼€å‘æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_7-2-å››ç»´ä¸€ä½“çš„å¼€å‘æ¡ˆä¾‹" aria-hidden="true">#</a> 7.2 å››ç»´ä¸€ä½“çš„å¼€å‘æ¡ˆä¾‹</h3><ol><li>ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ï¼š</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ·»åŠ ç”¨æˆ·é€»è¾‘</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/users&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userService<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;redirect:/users&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>UserService</code>æ¥å£å’Œå®ƒçš„å®ç°ç±»<code>UserServiceImpl</code>ï¼ŒåŒæ—¶åœ¨<code>UserController</code>ä¸­ä½¿ç”¨<code>@Autowired</code>æ³¨è§£å°†<code>UserService</code>è‡ªåŠ¨æ³¨å…¥ã€‚</p><p>2.é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect-Oriented Programmingï¼‰ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoggingAspect</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.example.controller.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logBefore</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before method: &quot;</span> <span class="token operator">+</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.example.controller.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logAfter</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;After method: &quot;</span> <span class="token operator">+</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåˆ‡é¢ç±»<code>LoggingAspect</code>ï¼Œä½¿ç”¨<code>@Before</code>å’Œ<code>@After</code>æ³¨è§£å®šä¹‰äº†åœ¨æ–¹æ³•æ‰§è¡Œå‰åæ‰“å°æ—¥å¿—çš„é€»è¾‘ã€‚</p><p>3.æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰ï¼š</p><p>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰Beançš„å®ä¾‹åŒ–å’Œé…ç½®ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ<code>application-context.xml</code>æ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.service.UserServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userController<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.javatop.controller.UserController<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†<code>userService</code>å’Œ<code>userController</code>çš„å®ä¾‹åŒ–å’Œä¾èµ–å…³ç³»ã€‚</p><p>4.è‡ªåŠ¨åŒ–æ¨¡å—åŒ–ï¼ˆComponent-Based Developmentï¼‰ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRepository</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>UserRepository</code>ç±»å¹¶ä½¿ç”¨<code>@Repository</code>æ³¨è§£å°†å…¶æ ‡è®°ä¸ºä»“åº“ç»„ä»¶ã€‚</p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placehoder</span>
<span class="token attr-name">2.</span> <span class="token attr-name">@PropertySource</span>  <span class="token attr-name">ã€æ¨èã€‘</span>
<span class="token attr-name">3.</span> <span class="token attr-name">&lt;bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PropertySourcePlaceholderConfigure<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token list punctuation">4.</span> @Bean            ã€æ¨èã€‘
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-çº¯æ³¨è§£ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_8-çº¯æ³¨è§£ç¼–ç¨‹" aria-hidden="true">#</a> 8.çº¯æ³¨è§£ç¼–ç¨‹</h2><h3 id="_1-çº¯æ³¨è§£ç‰ˆaopç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-çº¯æ³¨è§£ç‰ˆaopç¼–ç¨‹" aria-hidden="true">#</a> 1. çº¯æ³¨è§£ç‰ˆAOPç¼–ç¨‹</h3><h4 id="_1-æ­å»ºç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_1-æ­å»ºç¯å¢ƒ" aria-hidden="true">#</a> 1. æ­å»ºç¯å¢ƒ</h4><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> åˆ›å»ºé…ç½®Bean 
<span class="token list punctuation">2.</span> å¼€å¯æ³¨è§£æ‰«æ @ComponentScan()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å¼€å‘æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_2-å¼€å‘æ­¥éª¤" aria-hidden="true">#</a> 2. å¼€å‘æ­¥éª¤</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">1.</span> åŸå§‹å¯¹è±¡
   <span class="token annotation punctuation">@Service</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Component</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span><span class="token punctuation">{</span>
     
   <span class="token punctuation">}</span>
<span class="token number">2.</span> åˆ›å»ºåˆ‡é¢ç±» ï¼ˆé¢å¤–åŠŸèƒ½ åˆ‡å…¥ç‚¹ ç»„è£…åˆ‡é¢ï¼‰
    <span class="token annotation punctuation">@Aspect</span>
    <span class="token annotation punctuation">@Component</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* login(..))&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">arround</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----aspect log ------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Object</span> ret <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token number">3.</span> <span class="token class-name">Spring</span>çš„é…ç½®æ–‡ä»¶ä¸­
   <span class="token operator">&lt;</span>aop<span class="token operator">:</span>aspectj<span class="token operator">-</span>autoproxy <span class="token operator">/</span><span class="token operator">&gt;</span>   æ›¿æ¢ä¸ºï¼š
   <span class="token annotation punctuation">@EnableAspectjAutoProxy</span> <span class="token operator">--</span><span class="token operator">-&gt;</span> åŠ åœ¨é…ç½®<span class="token class-name">Bean</span>ä¸Š 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æ³¨è§£aopç»†èŠ‚åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_3-æ³¨è§£aopç»†èŠ‚åˆ†æ" aria-hidden="true">#</a> 3. æ³¨è§£AOPç»†èŠ‚åˆ†æ</h4><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> ä»£ç†åˆ›å»ºæ–¹å¼çš„åˆ‡æ¢ JDK Cglib 
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span> <span class="token attr-name">proxy-target-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>true|false</span> <span class="token punctuation">/&gt;</span></span>
   @EnableAspectjAutoProxy(proxyTargetClass)
<span class="token list punctuation">2.</span> æ³¨æ„ï¼šSpringBooté»˜è®¤æŠŠ@EnableAspectjAutoProxyè®¾ç½®å¥½äº†ï¼Œä»¥åä½¿ç”¨SpringBootï¼Œè¿›è¡ŒAOPå¼€å‘æ—¶ï¼Œä¸éœ€è¦é¢å¤–è®¾ç½®ã€‚ 
    Spring AOP ä»£ç†é»˜è®¤å®ç° JDK  SpringBOOT AOP ä»£ç†é»˜è®¤å®ç° Cglib 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-çº¯æ³¨è§£ç‰ˆspring-mybatisæ•´åˆ" tabindex="-1"><a class="header-anchor" href="#_2-çº¯æ³¨è§£ç‰ˆspring-mybatisæ•´åˆ" aria-hidden="true">#</a> 2. çº¯æ³¨è§£ç‰ˆSpring+MyBatisæ•´åˆ</h3><h4 id="_2-1-åŸºç¡€é…ç½®-é…ç½®bean" tabindex="-1"><a class="header-anchor" href="#_2-1-åŸºç¡€é…ç½®-é…ç½®bean" aria-hidden="true">#</a> 2.1 åŸºç¡€é…ç½® ï¼ˆé…ç½®Beanï¼‰</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>1. è¿æ¥æ± 
  <span class="token comment">&lt;!--è¿æ¥æ± --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/Leo?useSSL=false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
   
   @Bean
   public DataSource dataSource(){
      DruidDataSource dataSource = new DruidDataSource();
      dataSource.setDriverClassName(&quot;&quot;);
      dataSource.setUrl();
      ...
      return dataSource;
   }

2. SqlSessionFactoryBean
    <span class="token comment">&lt;!--åˆ›å»ºSqlSessionFactory SqlSessionFactoryBean--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>typeAliasesPackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.javatop.entity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapperLocations<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>classpath:org.javatop.mapper/*Mapper.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    @Bean
    public SqlSessionFactoryBean sqlSessionFactoryBean(DataSource dataSource){
         SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();
         sqlSessionFactoryBean.setDataSource(dataSource);
         sqlSessionFactoryBean.setTypeAliasesPackage(&quot;&quot;);
         ...
         return sqlSessionFactoryBean;
    }

3. MapperScannerConfigure 
   <span class="token comment">&lt;!--åˆ›å»ºDAOå¯¹è±¡ MapperScannerConfigure--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scanner<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBeanName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basePackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.javatop.dao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
  
  @MapperScan(basePackages={&quot;org.javatop.dao&quot;}) ---&gt; é…ç½®beanå®Œæˆ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-ç¼–ç " tabindex="-1"><a class="header-anchor" href="#_2-2-ç¼–ç " aria-hidden="true">#</a> 2.2 ç¼–ç </h4><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code><span class="token list punctuation">1.</span> å®ä½“
<span class="token list punctuation">2.</span> è¡¨
<span class="token list punctuation">3.</span> DAOæ¥å£
<span class="token list punctuation">4.</span> Mapperæ–‡ä»¶ 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-ç»†èŠ‚åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_2-3-ç»†èŠ‚åˆ†æ" aria-hidden="true">#</a> 2.3 ç»†èŠ‚åˆ†æï¼š</h4><p>MapperLocationsç¼–ç æ—¶é€šé…çš„å†™æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//è®¾ç½®Mapperæ–‡ä»¶çš„è·¯å¾„ è¿™ç§æ–¹å¼åªèƒ½è®¾ç½®ä¸€ä¸ªæ–‡ä»¶</span>
sqlSessionFactoryBean<span class="token punctuation">.</span><span class="token function">setMapperLocations</span><span class="token punctuation">(</span><span class="token class-name">Resource</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Resource</span> resouce <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathResouce</span><span class="token punctuation">(</span><span class="token string">&quot;UserDAOMapper.xml&quot;</span><span class="token punctuation">)</span>
  
sqlSessionFactoryBean<span class="token punctuation">.</span><span class="token function">setMapperLocations</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">&quot;UserDAOMapper.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>xmlè®¾ç½®ä¸€ç»„Mapperæ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapperLocations<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>classpath:org.javatop.mapper/*Mapper.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>javaä»£ç è®¾ç½®ä¸€ç»„Mapperæ–‡ä»¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ResourcePatternResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PathMatchingResourcePatternResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Resource</span><span class="token punctuation">[</span><span class="token punctuation">]</span> resources <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token string">&quot;org.javatop.mapper/*Mapper.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sqlSessionFactoryBean<span class="token punctuation">.</span><span class="token function">setMapperLocations</span><span class="token punctuation">(</span>resources<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-é…ç½®beanæ•°æ®è€¦åˆçš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-4-é…ç½®beanæ•°æ®è€¦åˆçš„é—®é¢˜" aria-hidden="true">#</a> 2.4 é…ç½®Beanæ•°æ®è€¦åˆçš„é—®é¢˜</h4><p>æå–propertiesæ–‡ä»¶ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">mybatis.driverClassName</span> <span class="token punctuation">=</span> <span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token key attr-name">mybatis.url</span> <span class="token punctuation">=</span> <span class="token value attr-value">jdbc:mysql://localhost:3306/Leo?useSSL=false</span>
<span class="token key attr-name">mybatis.username</span> <span class="token punctuation">=</span> <span class="token value attr-value">root</span>
<span class="token key attr-name">mybatis.password</span> <span class="token punctuation">=</span> <span class="token value attr-value">root</span>
<span class="token key attr-name">mybatis.typeAliasesPackages</span> <span class="token punctuation">=</span> <span class="token value attr-value">org.javatop.mybatis</span>
<span class="token key attr-name">mybatis.mapperLocations</span> <span class="token punctuation">=</span> <span class="token value attr-value">org.javatop.mapper/*Mapper.xml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>javaä»£ç ä¸­è·å–ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token annotation punctuation">@Component</span>
  <span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:mybatis.properties&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisProperties</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${mybatis.driverClassName}&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> driverClassName<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${mybatis.url}&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${mybatis.username}&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${mybatis.password}&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${mybatis.typeAliasesPackages}&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> typeAliasesPackages<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${mybatis.mapperLocations}&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> mapperLocations<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisAutoConfiguration</span> <span class="token punctuation">{</span>
  
      <span class="token annotation punctuation">@Autowired</span>
      <span class="token keyword">private</span> <span class="token class-name">MybatisProperties</span> mybatisProperties<span class="token punctuation">;</span>
  
      <span class="token annotation punctuation">@Bean</span>
      <span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">DruidDataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          dataSource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span>mybatisProperties<span class="token punctuation">.</span><span class="token function">getDriverClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span>mybatisProperties<span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>mybatisProperties<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>mybatisProperties<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  
      <span class="token annotation punctuation">@Bean</span>
      <span class="token keyword">public</span> <span class="token class-name">SqlSessionFactoryBean</span> <span class="token function">sqlSessionFactoryBean</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">SqlSessionFactoryBean</span> sqlSessionFactoryBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          sqlSessionFactoryBean<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
          sqlSessionFactoryBean<span class="token punctuation">.</span><span class="token function">setTypeAliasesPackage</span><span class="token punctuation">(</span>mybatisProperties<span class="token punctuation">.</span><span class="token function">getTypeAliasesPackages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//sqlSessionFactoryBean.setMapperLocations(new ClassPathResource(&quot;UserDAOMapper.xml&quot;));</span>
  
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
              <span class="token class-name">ResourcePatternResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PathMatchingResourcePatternResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token class-name">Resource</span><span class="token punctuation">[</span><span class="token punctuation">]</span> resources <span class="token operator">=</span> resolver<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span>mybatisProperties<span class="token punctuation">.</span><span class="token function">getMapperLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              sqlSessionFactoryBean<span class="token punctuation">.</span><span class="token function">setMapperLocations</span><span class="token punctuation">(</span>resources<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
  
          <span class="token keyword">return</span> sqlSessionFactoryBean<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-çº¯æ³¨è§£ç‰ˆäº‹åŠ¡ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-çº¯æ³¨è§£ç‰ˆäº‹åŠ¡ç¼–ç¨‹" aria-hidden="true">#</a> 3. çº¯æ³¨è§£ç‰ˆäº‹åŠ¡ç¼–ç¨‹ï¼š</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>1. åŸå§‹å¯¹è±¡ XXXService
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.javatop.service.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDAO<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDAO<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

   @Service
   public class UserServiceImpl implements UserService{
         @Autowired
         private UserDAO userDAO;
   }

2. é¢å¤–åŠŸèƒ½
   <span class="token comment">&lt;!--DataSourceTransactionManager--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSourceTransactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    
    @Bean
    public DataSourceTransactionManager dataSourceTransactionManager(DataSource dataSource){
          DataSourceTransactionManager dstm = new DataSourceTransactionManager();
          dstm.setDataSource(dataSource);
          return dstm 
    }

3. äº‹åŠ¡å±æ€§
    @Transactional
    @Service
    public class UserServiceImpl implements UserService {
        @Autowired
        private UserDAO userDAO;

4. åŸºäºSchemaçš„äº‹åŠ¡é…ç½® 
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   @EnableTransactionManager ---&gt; é…ç½®Bean
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_9-æ€»ç»“" aria-hidden="true">#</a> 9.æ€»ç»“</h2><p>ä»¥ä¸Šä¾¿æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œæœ¬äººæ‰ç–å­¦æµ…ï¼Œæ–‡ç« æœ‰ä»€ä¹ˆé”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§ä½¬ä»¬æ‰¹è¯„æŒ‡æ­£ï¼æˆ‘æ˜¯<strong>Leo</strong>ï¼Œä¸€ä¸ªåœ¨äº’è”ç½‘è¡Œä¸šçš„å°ç™½ï¼Œç«‹å¿—æˆä¸ºæ›´å¥½çš„è‡ªå·±ã€‚</p><p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº<strong>Leo</strong>ï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å·-ç¨‹åºå‘˜Leoï¼Œåé¢æ–‡ç« ä¼šé¦–å…ˆåŒæ­¥è‡³å…¬ä¼—å·ã€‚</p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202312031906036.png" alt="å…¬ä¼—å·å°é¢" tabindex="0" loading="lazy"><figcaption>å…¬ä¼—å·å°é¢</figcaption></figure>`,157),o=[p];function c(l,i){return a(),s("div",null,o)}const d=n(e,[["render",c],["__file","spring5-annotation-code02.html.vue"]]);export{d as default};
