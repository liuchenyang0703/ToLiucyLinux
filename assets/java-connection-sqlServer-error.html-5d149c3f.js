import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as s,e}from"./app-8d307529.js";const t={},o=e(`<blockquote><p>最近公司换了新项目，这边也是进入了新一轮的开发，当项目经理把需求发给我之后我开始了需求的分析和coding。不一会我便开始拉去代码在本地开始跑程序。</p></blockquote><h2 id="问题发现" tabindex="-1"><a class="header-anchor" href="#问题发现" aria-hidden="true">#</a> 问题发现</h2><p><strong>这次使用的是SqlServer数据库，之前并没有使用过，但是问题不大，我按照需求文档的步骤连接好SqlServer之后，启动SpringBoot项目，发现了一个报错，如下：</strong></p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/default.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>刚开始我以为是SqlServer连接问题呢，于是便去查看数据库，发现数据库一切正常，我首先第一时间问了我的同事，他们是否有这样的问题，发现他们并没有，于是我便开始了我最拿手的环节，面向百度编程。</p><h2 id="开始解决" tabindex="-1"><a class="header-anchor" href="#开始解决" aria-hidden="true">#</a> 开始解决</h2><p>具体报错信息是这样，于是我便开始了百度</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>报错：<span class="token constant">ERROR</span> <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>a<span class="token punctuation">.</span>d<span class="token punctuation">.</span>p<span class="token punctuation">.</span></span>DruidDataSource</span>$<span class="token class-name">CreateConnectionThread</span> <span class="token punctuation">[</span><span class="token class-name">Druid</span><span class="token operator">-</span><span class="token class-name">ConnectionPool</span><span class="token operator">-</span><span class="token class-name">Create</span><span class="token operator">-</span><span class="token number">1218864105</span><span class="token punctuation">]</span> create connection <span class="token class-name">SQLException</span><span class="token punctuation">,</span> url<span class="token operator">:</span>jdbc<span class="token operator">:</span>sqlserver<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">47.114</span><span class="token number">.91</span><span class="token number">.217</span><span class="token operator">:</span><span class="token number">1433</span><span class="token punctuation">;</span><span class="token class-name">DatabaseName</span><span class="token operator">=</span><span class="token class-name">PileTestingSystem</span><span class="token punctuation">,</span> errorCode <span class="token number">0</span><span class="token punctuation">,</span> state <span class="token number">08</span><span class="token constant">S01</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>首先我进行了中文翻译</code></p><blockquote><p>中文翻译错误：c.a.d.p.DruidDataSource$CreateConnectionThread[Druid-ConnectionPool-Create-1218864105]创建连接SQLException，url:jdbc:sqlserver://47.114.91.217:1433;DatabaseName=PileTestingSystem，错误代码0，状态08S01<br> com.microsoft.sqlserver.jdbc.SQLServerException:驱动程序无法使用安全套接字层（SSL）加密建立到SQL Server的安全连接。错误：“客户端首选项[TLS12]不接受服务器选择的协议版本TLS10”。客户连接ID:c8434f3c-5f82-4cf2-b111-099e140f33d0<br> 在com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate（SQLServerConnection.java:2670）~[mssql-jdbc-6.4.0.jre8.jar:？]</p></blockquote><p><strong>这个错误主要就是驱动程序无法使用安全套（SSL）加密建立到SQL Server的安全连接</strong></p><h2 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法" aria-hidden="true">#</a> 解决方法</h2><p><strong>最终在我的查询下，找到了两种解决方法，现在提供给大家</strong></p><h3 id="方法一" tabindex="-1"><a class="header-anchor" href="#方法一" aria-hidden="true">#</a> 方法一</h3><p>如果使用的是jdk1.8的话，先要找到自己安装JDK目录下的<strong>java.security</strong>文件并进行修改，<br> 本人目录如下：<strong>D:\\jdk\\jre\\lib\\security</strong>下就会有这个<strong>java.security</strong>文件<br> 具体的修改情况如下 ：</p><p>打开文件后，注释掉这三行代码（也就是在这三行代码之前加 # ）：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>jdk<span class="token punctuation">.</span>tls<span class="token punctuation">.</span>disabledAlgorithms<span class="token operator">=</span><span class="token class-name">SSLv3</span><span class="token punctuation">,</span> <span class="token class-name">TLSv1</span><span class="token punctuation">,</span> <span class="token class-name">TLSv1</span><span class="token number">.1</span><span class="token punctuation">,</span> <span class="token constant">RC4</span><span class="token punctuation">,</span> <span class="token constant">DES</span><span class="token punctuation">,</span> <span class="token class-name">MD5withRSA</span><span class="token punctuation">,</span>
<span class="token constant">DH</span> keySize <span class="token operator">&lt;</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token constant">EC</span> keySize <span class="token operator">&lt;</span> <span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">3D</span><span class="token constant">ES_EDE_CBC</span>，anon<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span>
include jdk<span class="token punctuation">.</span>disabled<span class="token punctuation">.</span>namedCurves
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后重新启动项目，建立SQL Server的安全套连接就没有问题了。<br><strong>图片如下：</strong><br><strong>没修改之前的java.security文件：</strong></p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20230330104645835.png" alt="image-20230330104645835" tabindex="0" loading="lazy"><figcaption>image-20230330104645835</figcaption></figure><p><strong>修改之后的java.security文件：</strong></p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20230330104728125.png" alt="image-20230330104728125" tabindex="0" loading="lazy"><figcaption>image-20230330104728125</figcaption></figure><h3 id="方法二" tabindex="-1"><a class="header-anchor" href="#方法二" aria-hidden="true">#</a> 方法二</h3><p>打开文件后，找到这三行代码：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>jdk<span class="token punctuation">.</span>tls<span class="token punctuation">.</span>disabledAlgorithms<span class="token operator">=</span><span class="token class-name">SSLv3</span><span class="token punctuation">,</span> <span class="token class-name">TLSv1</span><span class="token punctuation">,</span> <span class="token class-name">TLSv1</span><span class="token number">.1</span><span class="token punctuation">,</span> <span class="token constant">RC4</span><span class="token punctuation">,</span> <span class="token constant">DES</span><span class="token punctuation">,</span> <span class="token class-name">MD5withRSA</span><span class="token punctuation">,</span>
<span class="token constant">DH</span> keySize <span class="token operator">&lt;</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token constant">EC</span> keySize <span class="token operator">&lt;</span> <span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">3D</span><span class="token constant">ES_EDE_CBC</span>，anon<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span>
include jdk<span class="token punctuation">.</span>disabled<span class="token punctuation">.</span>namedCurves
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后去掉：其中的3DES_EDE_CBC,字符。（图片如下）<br> 然后重新启动项目，建立SQL Server的安全套连接就没有问题了。<br><strong>没修改之前的java.security文件：</strong></p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20230330104807347.png" alt="image-20230330104807347" tabindex="0" loading="lazy"><figcaption>image-20230330104807347</figcaption></figure><p><strong>修改之后的java.security文件：</strong></p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/image-20230330104824800.png" alt="image-20230330104824800" tabindex="0" loading="lazy"><figcaption>image-20230330104824800</figcaption></figure><p><strong>到这里问题就解决了，这里想告诉大家，遇到之前没有碰到过的新问题，不要慌，先追溯本源，看看到底是哪里出错了，思路一定要清晰，实在没有头绪的话可以百度，利用好搜索引擎，你一定可以的!!!</strong></p><figure><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202312031906036.png" alt="公众号封面" tabindex="0" loading="lazy"><figcaption>公众号封面</figcaption></figure>`,30),p=[o];function c(i,r){return n(),s("div",null,p)}const d=a(t,[["render",c],["__file","java-connection-sqlServer-error.html.vue"]]);export{d as default};
