import{_ as r}from"./plugin-vue_export-helper-c27b6911.js";import{r as s,o as d,c as t,a as e,b as a,d as n,e as c}from"./app-8d307529.js";const o={},m={class:"hint-container tip"},p=e("p",{class:"hint-container-title"},"友情提示",-1),u=e("strong",null,"转载须知",-1),v={href:"https://www.bilibili.com/video/BV1iq4y1u7vj?p=1&vd_source=cea816a08805c218ac4390ae9b61ae31",target:"_blank",rel:"noopener noreferrer"},h=c(`<h2 id="_1-安装前说明" tabindex="-1"><a class="header-anchor" href="#_1-安装前说明" aria-hidden="true">#</a> 1. 安装前说明</h2><h3 id="_1-1-查看是否安装过mysql" tabindex="-1"><a class="header-anchor" href="#_1-1-查看是否安装过mysql" aria-hidden="true">#</a> 1.1 查看是否安装过MySQL</h3><ul><li>如果你是用rpm安装, 检查一下RPM PACKAGE：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql <span class="token comment"># -i 忽略大小写</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>检查mysql service：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl status mysqld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_1-2-mysql的卸载" tabindex="-1"><a class="header-anchor" href="#_1-2-mysql的卸载" aria-hidden="true">#</a> 1.2 MySQL的卸载</h3><p><strong>1.</strong> <strong>关闭</strong> <strong>mysql</strong> <strong>服务</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl stop mysqld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>2.</strong> <strong>查看当前</strong> <strong>mysql</strong> <strong>安装状况</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
<span class="token comment"># 或</span>
yum list installed <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.</strong> <strong>卸载上述命令查询出的已安装程序</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum remove mysql-xxx mysql-xxx mysql-xxx mysqk-xxxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>务必卸载干净，反复执行<code>rpm -qa | grep -i mysql</code>确认是否有卸载残留</p><p><strong>4.</strong> <strong>删除</strong> <strong>mysql</strong> <strong>相关文件</strong></p><ul><li>查找相关文件</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">find</span> / <span class="token parameter variable">-name</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>删除上述命令查找出的相关文件</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>5.删除 my.cnf</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/my.cnf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-mysql的linux版安装" tabindex="-1"><a class="header-anchor" href="#_2-mysql的linux版安装" aria-hidden="true">#</a> 2. MySQL的Linux版安装</h2><h3 id="_2-1-centos7下检查mysql依赖" tabindex="-1"><a class="header-anchor" href="#_2-1-centos7下检查mysql依赖" aria-hidden="true">#</a> 2.1 CentOS7下检查MySQL依赖</h3><p><strong>1.</strong> <strong>检查/tmp临时目录权限（必不可少）</strong></p><p>由于mysql安装过程中，会通过mysql用户在/tmp目录下新建tmp_db文件，所以请给/tmp较大的权限。执行 ：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">777</span> /tmp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>2.</strong> <strong>安装前，检查依赖</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> -qa<span class="token operator">|</span><span class="token function">grep</span> libaio
<span class="token function">rpm</span> -qa<span class="token operator">|</span><span class="token function">grep</span> net-tools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-centos7下mysql安装过程" tabindex="-1"><a class="header-anchor" href="#_2-2-centos7下mysql安装过程" aria-hidden="true">#</a> 2.2 CentOS7下MySQL安装过程</h3><p><strong>1.</strong> <strong>将安装程序拷贝到/opt目录下</strong></p><p>在mysql的安装文件目录下执行：（必须按照顺序执行）</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-common-8.0.25-1.el7.x86_64.rpm 
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-client-plugins-8.0.25-1.el7.x86_64.rpm 
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-libs-8.0.25-1.el7.x86_64.rpm 
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-client-8.0.25-1.el7.x86_64.rpm 
<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-server-8.0.25-1.el7.x86_64.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>rpm</code>是Redhat Package Manage缩写，通过RPM的管理，用户可以把源代码包装成以rpm为扩展名的文件形式，易于安装。</li><li><code>-i</code>, --install 安装软件包</li><li><code>-v</code>, --verbose 提供更多的详细信息输出</li><li><code>-h</code>, --hash 软件包安装的时候列出哈希标记 (和 -v 一起使用效果更好)，展示进度条</li></ul><blockquote><p>若存在mariadb-libs问题，则执行<strong>yum remove mysql-libs</strong>即可</p></blockquote><h3 id="_2-3-查看mysql版本" tabindex="-1"><a class="header-anchor" href="#_2-3-查看mysql版本" aria-hidden="true">#</a> 2.3 查看MySQL版本</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">--version</span> 
<span class="token comment">#或</span>
mysqladmin <span class="token parameter variable">--version</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-服务的初始化" tabindex="-1"><a class="header-anchor" href="#_2-4-服务的初始化" aria-hidden="true">#</a> 2.4 服务的初始化</h3><p>为了保证数据库目录与文件的所有者为 mysql 登录用户，如果你是以 root 身份运行 mysql 服务，需要执行下面的命令初始化：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysqld <span class="token parameter variable">--initialize</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>说明： --initialize 选项默认以“安全”模式来初始化，则会为 root 用户生成一个密码并将<code>该密码标记为过期</code>，登录后你需要设置一个新的密码。生成的<code>临时密码</code>会往日志中记录一份。</p><p>查看密码：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> /var/log/mysqld.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>root@localhost: 后面就是初始化的密码</p><h3 id="_2-5-启动mysql-查看状态" tabindex="-1"><a class="header-anchor" href="#_2-5-启动mysql-查看状态" aria-hidden="true">#</a> 2.5 启动MySQL，查看状态</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#加不加.service后缀都可以 </span>
启动：systemctl start mysqld.service 
关闭：systemctl stop mysqld.service 
重启：systemctl restart mysqld.service 
查看状态：systemctl status mysqld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-6-查看mysql服务是否自启动" tabindex="-1"><a class="header-anchor" href="#_2-6-查看mysql服务是否自启动" aria-hidden="true">#</a> 2.6 查看MySQL服务是否自启动</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl list-unit-files<span class="token operator">|</span><span class="token function">grep</span> mysqld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>如不是enabled可以运行如下命令设置自启动</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> mysqld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>如果希望不进行自启动，运行如下命令设置</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl disable mysqld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-mysql登录" tabindex="-1"><a class="header-anchor" href="#_3-mysql登录" aria-hidden="true">#</a> 3. MySQL登录</h2><h3 id="_3-1-首次登录" tabindex="-1"><a class="header-anchor" href="#_3-1-首次登录" aria-hidden="true">#</a> 3.1 首次登录</h3><p>通过<code>mysql -hlocalhost -P3306 -uroot -p</code>进行登录，在Enter password：录入初始化密码</p><h3 id="_3-2-修改密码" tabindex="-1"><a class="header-anchor" href="#_3-2-修改密码" aria-hidden="true">#</a> 3.2 修改密码</h3><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;new_password&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-3-设置远程登录" tabindex="-1"><a class="header-anchor" href="#_3-3-设置远程登录" aria-hidden="true">#</a> 3.3 设置远程登录</h3><p><strong>1.</strong> <strong>确认网络</strong></p><p>1.在远程机器上使用ping ip地址<code>保证网络畅通</code></p><p>2.在远程机器上使用telnet命令<code>保证端口号开放</code>访问</p><p><strong>2.</strong> <strong>关闭防火墙或开放端口</strong></p><p><strong>方式一：关闭防火墙</strong></p><ul><li>CentOS6 ：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">service</span> iptables stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>CentOS7：</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#开启防火墙</span>
systemctl start firewalld.service
<span class="token comment">#查看防火墙状态</span>
systemctl status firewalld.service
<span class="token comment">#关闭防火墙</span>
systemctl stop firewalld.service
<span class="token comment">#设置开机启用防火墙 </span>
systemctl <span class="token builtin class-name">enable</span> firewalld.service 
<span class="token comment">#设置开机禁用防火墙 </span>
systemctl disable firewalld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>方式二：开放端口</strong></p><ul><li>查看开放的端口号</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>firewall-cmd --list-all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>设置开放的端口号</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>firewall-cmd --add-service<span class="token operator">=</span>http <span class="token parameter variable">--permanent</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp <span class="token parameter variable">--permanent</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>重启防火墙</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_4-linux下修改配置" tabindex="-1"><a class="header-anchor" href="#_4-linux下修改配置" aria-hidden="true">#</a> 4. Linux下修改配置</h2><ul><li>修改允许远程登陆</li></ul><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>use mysql;
select Host,User from user;
update user set host = &#39;%&#39; where user =&#39;root&#39;;
flush privileges;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>%</code>是个 通配符 ，如果Host=192.168.1.%，那么就表示只要是IP地址前缀为“192.168.1.”的客户端都可以连接。如果<code>Host=%</code>，表示所有IP都有连接权限。</p><p>注意：在生产环境下不能为了省事将host设置为%，这样做会存在安全问题，具体的设置可以根据生产环境的IP进行设置。</p></blockquote><p>配置新连接报错：错误号码 2058，分析是 mysql 密码加密方法变了。</p><p>**解决方法一：**升级远程连接工具版本</p><p><strong>解决方法二：</strong></p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;abc123&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_5-字符集的相关操作" tabindex="-1"><a class="header-anchor" href="#_5-字符集的相关操作" aria-hidden="true">#</a> 5. 字符集的相关操作</h2><h3 id="_5-1-各级别的字符集" tabindex="-1"><a class="header-anchor" href="#_5-1-各级别的字符集" aria-hidden="true">#</a> 5.1 各级别的字符集</h3><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>show variables like &#39;character%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>character_set_server：服务器级别的字符集</li><li>character_set_database：当前数据库的字符集</li><li>character_set_client：服务器解码请求时使用的字符集</li><li>character_set_connection：服务器处理请求时会把请求字符串从character_set_client转为character_set_connection</li><li>character_set_results：服务器向客户端返回数据时使用的字符集</li></ul><p><strong>小结</strong></p><ul><li>如果<code>创建或修改列</code>时没有显式的指定字符集和比较规则，则该列<code>默认用表的</code>字符集和比较规则</li><li>如果<code>创建表时</code>没有显式的指定字符集和比较规则，则该表<code>默认用数据库的</code>字符集和比较规则</li><li>如果<code>创建数据库时</code>没有显式的指定字符集和比较规则，则该数据库<code>默认用服务器的</code>字符集和比较规则</li></ul><h3 id="_5-2-请求到响应过程中字符集的变化" tabindex="-1"><a class="header-anchor" href="#_5-2-请求到响应过程中字符集的变化" aria-hidden="true">#</a> 5.2 请求到响应过程中字符集的变化</h3>`,88),b=e("figure",null,[e("img",{src:"https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202312031906036.png",alt:"公众号封面",tabindex:"0",loading:"lazy"}),e("figcaption",null,"公众号封面")],-1);function g(y,_){const i=s("ExternalLinkIcon"),l=s("Mermaid");return d(),t("div",null,[e("div",m,[p,e("p",null,[u,a(": 以下所有文章整理于B站宋红康老师的《MySQL数据库入门到大牛》。"),e("a",v,[a("MySQL"),n(i)])])]),h,n(l,{id:"mermaid-327",code:"eJxLL0osyFAIceJy1Hi6btGzju3PV6/XVNDVtVOoUXqyd//zKSueTe59snfO8827n++e/3xWy9O105+vWfZydtvzPdOeL2h8sX77s41NEMEnOzYp1Sg4aTzZ3ZeckViUmFySWhRfnFoSn5yTmZpX8mLvmme9i57s2IUmmZ+Xl5pckpmfp8nlBLbZGYsJcEVwU562bn+ydzLIRR3TIS5Fdp0mlzPYLBeNpxvans1f+mL9oue7Jz+bNwdoNIrOHV2YmnG4tCi1uDSnpFiTy4WoAHqxfDEwgJ5O7n26awpcHBJGjlxcAF1W1k4="}),b])}const k=r(o,[["render",g],["__file","install-and-use-mysql-in-linux.html.vue"]]);export{k as default};
